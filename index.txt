<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <title>Field Notes ‚Äî v2.8.4</title>

  <meta name="theme-color" content="#0b1220">

  <link rel="manifest" href="./manifest.webmanifest">
  <link rel="icon" href="./icons/icon-192.png">
  <link rel="apple-touch-icon" href="./icons/icon-192.png">
  <link rel="stylesheet" href="./styles.css">
</head>

<body>

<header>
  <h1>Field Notes ‚Äî v2.8.4</h1>
  <div id="miniCounter">Samples: 0 ‚Ä¢ Photos: 0</div>
  <div id="dirtyBadge">Saved ‚úì</div>
  <button id="btnInstall" class="outline" style="display:none">Install</button>
</header>

<main>

  <!-- Location Editor -->
  <section class="card">

    <!-- Project + Location Note -->
    <div class="kv" style="margin-bottom:12px">
      <div>Project</div>
      <input id="project" placeholder="Project name">

      <div>Location Note</div>
      <input id="locNote" placeholder="Short note (required)">
    </div>

    <!-- New / Close & Save -->
    <div class="toolbar" style="margin-bottom:8px">
      <button id="btnNewLoc" class="primary">New Location</button>
      <button id="btnCloseSave" class="outline">Close & Save Location</button>
    </div>

    <!-- Parent folder selector -->
    <div class="toolbar" style="margin:-4px 0 8px 0">
      <button id="btnPickFolder" class="outline">üìÅ Pick Save Folder</button>
      <button id="btnGPS" class="outline">Reacquire GPS</button>
    </div>

    <!-- Location info -->
    <div class="note" id="locInfo">No location yet.</div>

    <!-- Camera toolbar -->
    <div class="toolbar" style="margin:12px 0 8px">
      <button id="btnCamera" class="primary">Open camera</button>
      <button id="btnMacro" class="outline" title="Macro toggle">üå∑ Macro</button>
      <input type="file" id="fileInput" accept="image/*" capture="environment" hidden multiple>
    </div>

    <!-- Zoom row -->
    <div class="toolbar" id="zoomRow" style="display:none">
      <label for="zoomRange">Zoom</label>
      <input type="range" id="zoomRange" min="1" max="1" step="0.1" style="flex:1">
      <span id="zoomVal" class="note"></span>
    </div>

    <!-- Camera preview -->
    <div class="videoWrap">
      <video id="video" playsinline></video>
    </div>
    <canvas id="canvas"></canvas>

    <!-- Sample toolbar -->
    <div class="toolbar" style="margin-top:8px">
      <button id="btnSnap" class="primary" disabled>üì∏ Snap</button>
      <button id="btnNextSample" class="outline">Next Sample</button>
      <button id="btnClearAll" class="outline">üóë Clear All</button>
      <button id="btnAutoSave" class="outline" title="Auto save every 3 photos (default folder)">Auto Save: OFF</button>
    </div>

    <!-- Gallery -->
    <div class="gallery" id="gallery"></div>

    <div class="note" id="status"></div>
  </section>

  <!-- Save Log -->
  <section id="logPanel">
    <header>
      <h2>Recent Saves (max 20)</h2>
      <small class="note">Newest at top</small>
    </header>

    <table id="logTable">
      <thead>
        <tr><th>Project</th><th>Sample</th><th>Filename</th></tr>
      </thead>
      <tbody id="logBody"></tbody>
    </table>
  </section>

</main>

<!-- Flash for shutter -->
<div id="flash"></div>

<!-- Toast container -->
<div id="toast"></div>

<!-- Progress panel -->
<div id="progressPanel">
  <div class="wrap">
    <div class="title" id="ppTitle">Working‚Ä¶</div>
    <table>
      <thead>
        <tr><th>Step</th><th>Progress</th><th class="pct">%</th></tr>
      </thead>
      <tbody id="ppBody"></tbody>
    </table>
  </div>
</div>

<!-- Viewer Modal -->
<div class="modal" id="viewer">
  <button class="close" id="viewerClose">√ó Close</button>
  <img id="viewerImg" alt="preview">
</div>

<!-- placeholder app.js reference -->
<script type="module" src="./app.js"></script>
</body>
</html>
